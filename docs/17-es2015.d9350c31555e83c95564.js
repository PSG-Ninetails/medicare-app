(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{AMsP:function(t,i,e){"use strict";e.r(i),e.d(i,"PatientPageModule",(function(){return K}));var o=e("ofXK"),n=e("3Pt+"),s=e("TEn/"),a=e("tyNb"),r=e("mrSG"),c=e("fXoL"),l=e("NcWD"),b=e("FKlg"),p=e("/XPu");let d=(()=>{class t{constructor(t,i,e,o,n,s,a,r){this.modalCtrl=t,this.formbuilder=i,this.toastController=e,this.doctorservice=o,this.toastController1=n,this.patientservice=s,this.socialSharing=a,this.toastController2=r,this.doctor={$key:"",username:"",password:"",dtype:"",area:"",name:"",prb:[],apt:[],available:!1},this.aptm={pid:"",pname:"",contact:""},this.prbtosend={patient_id:"",patient_name:"",patient_problem:""},this.isavailable=!1,this.aptForm=this.formbuilder.group({myOmy:[""]}),this.openform=!1}ngOnInit(){console.log(this.ss.$key),this.patientservice.getPatient(this.pat1_key).valueChanges().subscribe(t=>{this.patient=t}),this.doctorservice.getDoctor(this.ss.$key).valueChanges().subscribe(t=>{this.doctor=t,console.log(this.doctor),this.segmentChange(this.doctor.available)})}segmentChange(t){1==t?(this.isavailable=!0,this.docStatus="Available"):(this.isavailable=!1,this.docStatus="Not-available")}dismiss(){this.modalCtrl.dismiss({dismissed:!0})}consult(){this.openform=!0}bookApt(){var t,i=0,e=[],o=0,n=new Date,s=String(n.getDate()).padStart(2,"0")+"/"+String(n.getMonth()+1).padStart(2,"0")+"/"+n.getFullYear();for(var a of(t=s.split("/",3),console.log(t),this.patient.apt))console.log(a.did),console.log(this.ss.$key),a.did==this.ss.$key?(console.log(this.ss.name),e=a.date.split("/",3),console.log(e),Number(e[2])<Number(t[2])?(console.log("old appt year"),o=1):Number(e[2])==Number(t[2])?Number(e[1])<Number(t[1])?(console.log("same year old appt month"),o=1):Number(e[1])==Number(t[1])&&Number(e[0])<Number(t[0])?(console.log("Same month old appt date"),o=1):o=0:o=0):i+=1;1==o||i==this.patient.apt.length?(this.aptm.pid=this.pat1_key,this.aptm.pname=this.patient.name,this.aptm.contact=this.patient.contact,this.doctor.apt.push(this.aptm),this.doctorservice.updateDoctors(this.doctor,this.ss.$key),this.presentToast1()):this.presentToast2()}aptInfo(){this.prbtosend.patient_id=this.pat1_key,this.prbtosend.patient_name=this.patient.name,this.prbtosend.patient_problem=this.aptForm.get("myOmy").value,this.doctor.prb.push(this.prbtosend),console.log(this.doctor),this.doctorservice.updateDoctors(this.doctor,this.ss.$key),this.presentToast(),this.openform=!1}presentToast(){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({position:"bottom",color:"primary",message:"Problrm Sent Successfully.",duration:2e3})).present()}))}presentToast1(){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController1.create({position:"middle",color:"primary",message:"You will receive time shortly.",duration:2e3})).present()}))}presentToast2(){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController2.create({position:"middle",color:"primary",message:"Appointment exists",duration:2e3})).present()}))}whatsapp(){this.socialSharing.shareViaWhatsApp(this.patient.name).then(()=>{}).catch(t=>{alert(t)})}instagram(){this.socialSharing.shareViaInstagram(this.patient.name,null)}facebook(){this.socialSharing.shareViaFacebookWithPasteMessageHint(this.patient.name).then(()=>{}).catch(t=>{alert(t)})}}return t.\u0275fac=function(i){return new(i||t)(c.Ib(s.O),c.Ib(n.a),c.Ib(s.T),c.Ib(l.a),c.Ib(s.T),c.Ib(b.a),c.Ib(p.a),c.Ib(s.T))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-doctormodal"]],inputs:{ss:"ss",pat1_key:"pat1_key"},decls:55,vars:9,consts:[["slot","end"],["ion-button","",3,"click"],["ion-text","","color","primary","showWhen","ios"],[3,"ngModel","ngModelChange"],["size","large","name","medkit"],["text-center",""],["expand","block","size","small","fill","outline","shape","round",2,"--border-color","red",3,"click"],["size","small","name","arrow-down"],[3,"hidden"],[3,"formGroup"],["placeholder","Describe Your Problem :","formControlName","myOmy"],["size","small","shape","round",3,"click"],["horizontal","end","vertical","bottom","slot","fixed"],["color","light"],["md","caret-back","ios","chevron-back-circle-outline"],["side","start"],["color","light","click","facebook()"],["name","logo-facebook"],["color","light","click","instagram()"],["name","logo-instagram"],["color","light","click","whatsapp()"],["name","logo-whatsapp"]],template:function(t,i){1&t&&(c.Lb(0,"ion-header"),c.Lb(1,"ion-toolbar"),c.Lb(2,"ion-title"),c.ic(3,"doctormodal"),c.Kb(),c.Lb(4,"ion-buttons",0),c.Lb(5,"button",1),c.Tb("click",(function(){return i.dismiss()})),c.Lb(6,"span",2),c.ic(7,"Cancel"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(8,"ion-content"),c.Lb(9,"ion-card"),c.Lb(10,"ion-grid"),c.Lb(11,"ion-row"),c.Jb(12,"ion-col"),c.Lb(13,"ion-col"),c.Lb(14,"div"),c.Lb(15,"ion-label",3),c.Tb("ngModelChange",(function(t){return i.docStatus=t})),c.Jb(16,"ion-icon",4),c.Kb(),c.Kb(),c.Kb(),c.Jb(17,"ion-col"),c.Kb(),c.Lb(18,"ion-row"),c.Lb(19,"ion-card-header"),c.Lb(20,"ion-card-subtitle"),c.ic(21),c.Kb(),c.Lb(22,"ion-card-title"),c.ic(23),c.Kb(),c.Kb(),c.Kb(),c.Lb(24,"ion-row"),c.Lb(25,"ion-card-content"),c.ic(26),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(27,"ion-card"),c.Lb(28,"ion-card-content"),c.Lb(29,"ion-grid"),c.Lb(30,"ion-row",5),c.Lb(31,"ion-button",6),c.Tb("click",(function(){return i.consult()})),c.ic(32,"Virtual Consult"),c.Jb(33,"ion-icon",7),c.Kb(),c.Kb(),c.Lb(34,"ion-row"),c.Lb(35,"div",8),c.Lb(36,"form",9),c.Lb(37,"ion-item"),c.Jb(38,"ion-input",10),c.Kb(),c.Lb(39,"ion-button",11),c.Tb("click",(function(){return i.aptInfo()})),c.ic(40,"Send"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(41,"ion-row",5),c.Lb(42,"ion-button",6),c.Tb("click",(function(){return i.bookApt()})),c.ic(43,"Book Appointment"),c.Jb(44,"ion-icon",7),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(45,"ion-fab",12),c.Lb(46,"ion-fab-button",13),c.Jb(47,"ion-icon",14),c.Kb(),c.Lb(48,"ion-fab-list",15),c.Lb(49,"ion-fab-button",16),c.Jb(50,"ion-icon",17),c.Kb(),c.Lb(51,"ion-fab-button",18),c.Jb(52,"ion-icon",19),c.Kb(),c.Lb(53,"ion-fab-button",20),c.Jb(54,"ion-icon",21),c.Kb(),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(15),c.Yb("ngModel",i.docStatus),c.yb(1),c.gc(i.isavailable?"color:lawngreen":"color:red"),c.yb(5),c.jc(i.ss.name),c.yb(2),c.jc(i.ss.dtype),c.yb(3),c.kc(" ",i.ss.area," "),c.yb(9),c.Yb("hidden",!i.openform),c.yb(1),c.Yb("formGroup",i.aptForm))},directives:[s.r,s.K,s.J,s.f,s.m,s.g,s.q,s.D,s.l,s.v,n.g,n.i,s.s,s.i,s.j,s.k,s.h,s.e,n.k,n.h,n.c,s.u,s.t,s.S,n.b,s.n,s.o,s.p],styles:[""]}),t})();var h=e("3A6K"),u=e("xHmn"),m=e("QrwE");function g(t,i){if(1&t&&(c.Lb(0,"ion-select-option",20),c.ic(1),c.Kb()),2&t){const t=i.$implicit;c.Zb("value",t.value),c.yb(1),c.jc(t.label)}}function f(t,i){if(1&t&&(c.Lb(0,"ion-select-option",20),c.ic(1),c.Kb()),2&t){const t=i.$implicit;c.Zb("value",t.value),c.yb(1),c.jc(t.label)}}function v(t,i){if(1&t){const t=c.Mb();c.Lb(0,"ion-item",21),c.Tb("click",(function(){c.dc(t);const e=i.$implicit;return c.Vb().presentModal(e)})),c.Lb(1,"ion-label"),c.ic(2),c.Kb(),c.Kb()}if(2&t){const t=i.$implicit;c.yb(2),c.jc(t.name)}}const y=[{path:"",component:(()=>{class t{constructor(t,i,e,o,n,s,a,r,c,l){this.formBuilder=t,this.modalController=i,this.modalController1=e,this.toastController=o,this.doctorservice=n,this.route=s,this.router=a,this.modalController2=r,this.patientservice=c,this.modalController3=l,this.specialists=[{label:"Allergists",value:"Allergists"},{label:"Cardiologists",value:"Cardiologists"}],this.locations=[{label:"Sangavi",value:"Sangavi"},{label:"Aundh",value:"Aundh"},{label:"Shivajinagar",value:"Shivajinagar"}],this.patient={$key:"",username:"",password:"",name:"",contact:"",prescription:[],recentlyvisited:[],apt:[]},this.pNotiBadge=0,this.recentBadge=0,this.paptBadge=0,this.selectedDoctors=[],this.visiteddoc={did:"",dname:"",dtype:"",area:""},this.filterForm=this.formBuilder.group({Specialist:[""],Location:[""]}),this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(this.pat_log=this.router.getCurrentNavigation().extras.state.pat),console.log(this.pat_log)})}setBadgeandRecent(){this.pNotiBadge=this.patient.prescription.length,this.recentBadge=this.patient.recentlyvisited.length,this.paptBadge=this.patient.apt.length}openPres(){this.checkPres=0!=this.patient.prescription.length}ngOnInit(){this.patientservice.getPatient(this.pat_log.$key).valueChanges().subscribe(t=>{this.patient=t,console.log(this.patient),this.setBadgeandRecent()}),this.doctorservice.getDoctors().snapshotChanges().subscribe(t=>{this.doctors=[],t.forEach(t=>{let i=t.payload.toJSON();i.$key=t.key,this.doctors.push(i)})})}presentModal(t){return Object(r.a)(this,void 0,void 0,(function*(){this.visiteddoc.area=t.area,this.visiteddoc.dname=t.name,this.visiteddoc.dtype=t.dtype,this.visiteddoc.did=t.$key;var i=0;for(var e of this.patient.recentlyvisited)if(t.$key==e.did){i=1;break}0==i&&(this.patient.recentlyvisited.push(this.visiteddoc),this.patient.recentlyvisited.length>5&&this.patient.recentlyvisited.splice(1,1)),this.patientservice.updatePatients(this.patient,this.pat_log.$key);const o=yield this.modalController.create({component:d,componentProps:{ss:t,pat1_key:this.pat_log.$key}});return yield o.present()}))}onSubmit(){for(var t of(this.selectedDoctors.splice(0,this.selectedDoctors.length),this.doctors))this.filterForm.get("Specialist").value==t.dtype&&this.filterForm.get("Location").value==t.area&&-1===this.selectedDoctors.indexOf(t)&&this.selectedDoctors.push(t)}presentPopover(){}aptModal(){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.modalController3.create({component:u.a,componentProps:{aptm:this.patient.apt}});return yield t.present()}))}notificationModal(){return Object(r.a)(this,void 0,void 0,(function*(){if(this.openPres(),this.checkPres){const t=yield this.modalController1.create({component:h.a,componentProps:{noti:this.patient.prescription}});return yield t.present()}this.presentToast()}))}visitedModal(){return Object(r.a)(this,void 0,void 0,(function*(){console.log(this.patient.recentlyvisited);const t=yield this.modalController2.create({component:m.a,componentProps:{recent:this.patient}});return yield t.present()}))}presentToast(){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({position:"bottom",color:"danger",message:"No Prescriptions to open.",duration:2e3})).present()}))}}return t.\u0275fac=function(i){return new(i||t)(c.Ib(n.a),c.Ib(s.O),c.Ib(s.O),c.Ib(s.T),c.Ib(l.a),c.Ib(a.a),c.Ib(a.g),c.Ib(s.O),c.Ib(b.a),c.Ib(s.O))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-patient"]],decls:52,vars:8,consts:[["slot","start"],["slot","end"],["slot","icon-only","name","notifications-circle",3,"click"],["color","primary"],[3,"formGroup","ngSubmit"],["color","light"],["value","Patient","formControlName","Specialist"],[3,"value",4,"ngFor","ngForOf"],["value","Patient","formControlName","Location"],["type","submit","color","danger","size","small"],[3,"click",4,"ngFor","ngForOf"],["horizontal","start","vertical","bottom","slot","fixed"],["color","dark"],["md","caret-up","ios","chevron-up-circle-outline"],["side","top"],["color","light",3,"click"],["name","medkit"],["color","warning"],["name","people-circle"],["name","notifications-circle"],[3,"value"],[3,"click"]],template:function(t,i){1&t&&(c.Lb(0,"ion-header"),c.Lb(1,"ion-toolbar"),c.Lb(2,"ion-title"),c.ic(3),c.Kb(),c.Lb(4,"ion-buttons",0),c.Jb(5,"ion-menu-button"),c.Kb(),c.Lb(6,"ion-buttons",1),c.Lb(7,"ion-button"),c.Lb(8,"ion-icon",2),c.Tb("click",(function(){return i.presentPopover()})),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(9,"ion-content"),c.Lb(10,"ion-card",3),c.Lb(11,"ion-card-header"),c.ic(12," Visit Doctor: "),c.Kb(),c.Lb(13,"ion-card-content"),c.Lb(14,"form",4),c.Tb("ngSubmit",(function(){return i.onSubmit()})),c.Lb(15,"ion-item",5),c.Lb(16,"ion-label"),c.ic(17,"Select Specialist :"),c.Kb(),c.Lb(18,"ion-select",6),c.hc(19,g,2,2,"ion-select-option",7),c.Kb(),c.Kb(),c.Lb(20,"ion-item",5),c.Lb(21,"ion-label"),c.ic(22,"Select Location :"),c.Kb(),c.Lb(23,"ion-select",8),c.hc(24,f,2,2,"ion-select-option",7),c.Kb(),c.Kb(),c.Lb(25,"ion-button",9),c.ic(26,"Search"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Lb(27,"ion-card"),c.Lb(28,"ion-card-header"),c.Lb(29,"ion-card-subtitle"),c.ic(30,"Filtered by Specialist and Location"),c.Kb(),c.Lb(31,"ion-card-title"),c.ic(32,"Search Results"),c.Kb(),c.Kb(),c.Lb(33,"ion-card-content"),c.Lb(34,"ion-list"),c.hc(35,v,3,1,"ion-item",10),c.Kb(),c.Kb(),c.Kb(),c.Lb(36,"ion-fab",11),c.Lb(37,"ion-fab-button",12),c.Jb(38,"ion-icon",13),c.Kb(),c.Lb(39,"ion-fab-list",14),c.Lb(40,"ion-fab-button",15),c.Tb("click",(function(){return i.aptModal()})),c.Jb(41,"ion-icon",16),c.Lb(42,"ion-badge",17),c.ic(43),c.Kb(),c.Kb(),c.Lb(44,"ion-fab-button",15),c.Tb("click",(function(){return i.visitedModal()})),c.Jb(45,"ion-icon",18),c.Lb(46,"ion-badge",17),c.ic(47),c.Kb(),c.Kb(),c.Lb(48,"ion-fab-button",15),c.Tb("click",(function(){return i.notificationModal()})),c.Jb(49,"ion-icon",19),c.Lb(50,"ion-badge",17),c.ic(51),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(3),c.kc("Welcome, ",i.patient.name,""),c.yb(11),c.Yb("formGroup",i.filterForm),c.yb(5),c.Yb("ngForOf",i.specialists),c.yb(5),c.Yb("ngForOf",i.locations),c.yb(11),c.Yb("ngForOf",i.selectedDoctors),c.yb(8),c.jc(i.paptBadge),c.yb(4),c.jc(i.recentBadge),c.yb(4),c.jc(i.pNotiBadge))},directives:[s.r,s.K,s.J,s.f,s.z,s.e,s.s,s.m,s.g,s.i,s.h,n.k,n.h,n.c,s.u,s.v,s.G,s.R,n.g,n.b,o.j,s.j,s.k,s.w,s.n,s.o,s.p,s.d,s.H],styles:[""]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(i){return new(i||t)},imports:[[a.i.forChild(y)],a.i]}),t})(),K=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(i){return new(i||t)},imports:[[o.c,n.d,n.j,s.L,L]]}),t})()}}]);